<h2>Portfolio</h2>
<loading *ngIf="!account || !positions"></loading>
<section *ngIf="account && positions">
    <h3 *ngIf="account">
        <account-title [portfolio]="account"></account-title>
    </h3>
    <p>{{positions.length}} Positions</p>
    <p class="lead">Portfolio value per {{dateTime | date:"yyyy-MM-dd HH:mm:ss"}}: <strong>{{portfolioSumCurrent | currency:currency:true}}</strong></p>
    <p>Increase of {{(portfolioSumCurrent/portfolioSumOriginal-1) | percent}} from {{portfolioSumOriginal | currency:currency:true}}</p>
    <table class="table table-hover" *ngIf="positions">
        <thead>
            <tr>
                <th>Date</th>
                <th>ISIN</th>
                <th>Name</th>
                <th>Current</th>
                <th>Percent</th>
                <th>Original</th>
            </tr>
        </thead>
        <tfoot>
            <tr>
                <th>{{dateTime | date:"yyyy-MM-dd HH:mm:ss"}}</th>
                <th>{{positions.length}} Positions</th>
                <th></th>
                <th class="text-right">{{portfolioSumCurrent | currency:currency:true}}</th>
                <td class="text-right">{{(portfolioSumCurrent/portfolioSumOriginal-1) | percent}}</td>
                <th class="text-right">{{portfolioSumOriginal | currency:currency:true}}</th>
            </tr>
        </tfoot>
        <tbody>
            <tr *ngFor="let trans of positions">
                <td class="col-sm-2">{{trans.dateTime | date:"yyyy-MM-dd HH:mm:ss"}}</td>
                <td class="col-sm-1">{{trans.isin}}</td>
                <td class="col-sm-2">{{trans.name}}</td>
                <td class="col-sm-1 text-right">{{trans.currentValue*trans.amount | currency:currency:true}}</td>
                <td class="col-sm-1 text-right">{{(trans.currentValue/trans.originalValue-1) | percent}}</td>
                <td class="col-sm-1 text-right">{{trans.originalValue*trans.amount | currency:currency:true}}</td>
            </tr>
        </tbody>
    </table>
</section>